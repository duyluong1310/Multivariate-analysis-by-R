<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Canonical Correlation Analysis (CCA)</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet"/>
<style>
  body { font-family: 'Segoe UI', Tahoma, sans-serif; }
  header {
    background: linear-gradient(90deg, #007bff, #00c6ff);
    color: white;
    padding: 2rem 1rem;
    text-align: center;
  }
  header h1 { font-weight: bold; }
  .code-container { max-width: 1000px; margin: 2rem auto; }
  pre {
    border-radius: 5px;
    overflow-x: auto;
  }
  .copy-btn {
    float: right;
    margin-top: -40px;
    margin-right: 10px;
    background: #ffc107;
    border: none;
    padding: 5px 10px;
    font-size: 0.8rem;
    border-radius: 3px;
    cursor: pointer;
  }
  footer {
    background-color: #343a40;
    color: white;
    padding: 1rem 0;
    text-align: center;
    margin-top: 3rem;
  }
</style>
</head>
<body>

<header>
  <h1>Canonical Correlation Analysis (CCA)</h1>
  <p>Example R code for teaching purposes</p>
</header>

<main class="container code-container">
  <button class="copy-btn" onclick="copyCode()">Copy</button>
  <pre><code class="language-r">
install.packages(c("CCA", "yacca", "ggplot2", "dplyr"))
library(CCA)      # Main functions: cc(), comput() for canonical correlations
library(yacca)    # Alternative: canonical.cor(), more print options
library(ggplot2)  # Visualizations
library(dplyr)    # Data wrangling
data(mtcars)

X <- mtcars[, c("mpg", "hp", "wt")]
Y <- mtcars[, c("drat", "qsec", "gear")]
# Run CCA
cca_mod <- cc(X, Y)

# Canonical correlations
cca_mod$cor
# Compute loadings (correlation between variables and canonical variates)
cc_results <- comput(X, Y, cca_mod)

# Canonical loadings for X variables
cc_results$xstructcorr

# Canonical loadings for Y variables
cc_results$ystructcorr
library(yacca)
yacca_mod <- cca(X, Y)  # note: yacca's cca() is different from CCA's cc()
print(yacca_mod)
# Compute canonical variates (scores)
u <- as.matrix(scale(X)) %*% cca_mod$xcoef[, 1]
v <- as.matrix(scale(Y)) %*% cca_mod$ycoef[, 1]

plot(u, v,
     xlab = "Canonical Variate 1 (X set)",
     ylab = "Canonical Variate 1 (Y set)",
     main = sprintf("First Canonical Correlation = %.3f", cca_mod$cor[1]))
abline(lm(v ~ u), col = "red")
install.packages("CCP")
library(CCP)

# Wilks' Lambda significance test
p.asym(cca_mod$cor, nrow(X), ncol(X), ncol(Y), tstat = "Wilks")
library(CCA)
library(CCP)
library(ggplot2)

# Data
X <- mtcars[, c("mpg", "hp", "wt")]
Y <- mtcars[, c("drat", "qsec", "gear")]

# Fit CCA
cca_mod <- cc(X, Y)

# Canonical correlations
cca_mod$cor

# Loadings
cc_results <- comput(X, Y, cca_mod)
cc_results$xstructcorr
cc_results$ystructcorr

# Significance test
p.asym(cca_mod$cor, nrow(X), ncol(X), ncol(Y), tstat = "Wilks")

# Plot first canonical variate pair
u <- as.matrix(scale(X)) %*% cca_mod$xcoef[, 1]
v <- as.matrix(scale(Y)) %*% cca_mod$ycoef[, 1]
plot(u, v, xlab = "CV1 (X)", ylab = "CV1 (Y)",
     main = sprintf("First Canonical Correlation = %.3f", cca_mod$cor[1]),
     pch = 19, col = "blue")
abline(lm(v ~ u), col = "red", lwd = 2)
  </code></pre>
</main>

<footer>
  Â© 2025 Your Name | Designed for Teaching Purposes
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-r.min.js"></script>
<script>
function copyCode() {
  const codeBlock = document.querySelector('pre code');
  navigator.clipboard.writeText(codeBlock.innerText).then(() => {
    alert('Code copied to clipboard!');
  });
}
</script>
</body>
</html>
